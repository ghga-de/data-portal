@if (showAsTable() && editNoteToRequester() && editInternalNote()) {
  <tr>
    <th class="pe-1 text-start">Note to Requester:</th>
    <td class="flex items-center">
      <span [hidden]="editNoteToRequester()!.show" class="grow">{{
        request().note_to_requester
      }}</span
      ><mat-chip
        (click)="
          this.editNotesAndTicket.handleEdit(
            'show',
            editNoteToRequester()!,
            this.request()
          )
        "
        [hidden]="editNoteToRequester()!.show"
        class="smaller-chip interactive-chip edit-button ms-2"
        ><mat-icon class="scale-[0.75]">edit</mat-icon>
      </mat-chip>
      <mat-form-field [hidden]="!editNoteToRequester()!.show" class="grow">
        <mat-label>Note to requester</mat-label>
        <textarea
          matInput
          [(ngModel)]="editNoteToRequester()!.editedValue"
          class="min-h-20"
        ></textarea>
      </mat-form-field>
      <mat-chip
        class="smaller-chip interactive-chip cancel-edit-button mx-2"
        [hidden]="!editNoteToRequester()!.show"
        (click)="
          this.editNotesAndTicket.handleEdit(
            'cancel',
            editNoteToRequester()!,
            this.request()
          )
        "
      >
        <mat-icon>close</mat-icon>
      </mat-chip>
      <mat-chip
        class="smaller-chip interactive-chip save-edit-button"
        [hidden]="!editNoteToRequester()!.show"
        (click)="
          this.editNotesAndTicket.handleEdit(
            'save',
            editNoteToRequester()!,
            this.request()
          )
        "
      >
        <mat-icon>check</mat-icon>
      </mat-chip>
    </td>
  </tr>
  <tr>
    <th class="pe-1 text-start">Internal Note:</th>
    <td class="flex items-center">
      <span [hidden]="editInternalNote()!.show" class="grow">{{
        request().internal_note
      }}</span
      ><mat-chip
        (click)="
          this.editNotesAndTicket.handleEdit(
            'show',
            editInternalNote()!,
            this.request()
          )
        "
        [hidden]="editInternalNote()!.show"
        class="smaller-chip interactive-chip edit-button ms-2"
        ><mat-icon class="scale-[0.75]">edit</mat-icon>
      </mat-chip>
      <mat-form-field [hidden]="!editInternalNote()!.show" class="grow">
        <mat-label>Internal note</mat-label>
        <textarea
          matInput
          [(ngModel)]="editInternalNote()!.editedValue"
          class="min-h-20"
        ></textarea>
      </mat-form-field>
      <mat-chip
        class="smaller-chip interactive-chip cancel-edit-button mx-2"
        [hidden]="!editInternalNote()!.show"
        (click)="
          this.editNotesAndTicket.handleEdit(
            'cancel',
            editInternalNote()!,
            this.request()
          )
        "
      >
        <mat-icon>close</mat-icon>
      </mat-chip>
      <mat-chip
        class="smaller-chip interactive-chip save-edit-button"
        [hidden]="!editInternalNote()!.show"
        (click)="
          this.editNotesAndTicket.handleEdit(
            'save',
            editInternalNote()!,
            this.request()
          )
        "
      >
        <mat-icon>check</mat-icon>
      </mat-chip>
    </td>
  </tr>
} @else {
  @if (showNoteToRequester()) {
    <p><span class="font-bold">Note: </span>{{ request().note_to_requester }}</p>
  }
  @if (showInternalNote()) {
    <p><span class="font-bold">Internal Note: </span>{{ request().internal_note }}</p>
  }
}
